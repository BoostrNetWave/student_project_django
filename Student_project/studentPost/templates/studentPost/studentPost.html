{% extends "main/Layout.html" %}

{% load static %}

{% block title %}
Post Details
{% endblock %}

{% block head_css %}
<link rel="stylesheet" href="{% static 'css/button.css' %}">
<link rel="stylesheet" href="{% static 'css/services.css' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/studentpost.css' %}">
{% endblock %}

{% block content %}
<section class="ezy__blog7 light">
    <img src="https://cdn.easyfrontend.com/pictures/blog/wide-banner.png" alt="" class="img-fluid w-100" />

    <div class="ezy__blog7-wrapper">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-lg-center">
            <h2 class="ezy__blog7-heading mb-3 mt-0">Let's Now make an impression.</h2>
            <p class="ezy__blog7-sub-heading mb-4">
              Wildebeest that irksomely hippopotamus along ubiquitously scallop oh up much and some while convulsive
              far laconically.
            </p>
            <a href="{% url 'create_blog_post' %}"><button class="px-3"><span>Create Post</span></button></a>
          </div>
        </div>

        <div class="row mt-5">
          {% for post in posts %}
          <div class="col-12 col-md-6 col-lg-4 mb-3">
            <article class="ezy__blog7-post">
              <div class="position-relative">
                {% if post.blog_image %}
                <img
                  src="{{ post.blog_image.url }}"
                  alt="Blog image"
                  class="img-fluid w-100 ezy-blog7-banner"
                />
                {% else %}
                <!-- Use a sample image -->
                <img
                  src="{% static 'assets/el-logo-de-automatia-la-innovadora-startup-especia-gkjFy6O-S_2MhMyJ9i_btQ-61EwEfxyRYiLIEA3QthxDg.jpeg' %}"
                  alt="Sample Image"
                  class="img-fluid w-100 ezy-blog7-banner"
                />
                {% endif %}
                <div class="px-4 py-3 ezy__blog7-calendar">{{ post.publication_date|date:"d M Y" }}</div>
              </div>
              <div class="p-3 p-md-4">
                <h4 class="mt-3 ezy__blog7-title fs-4 mb-4">{{ post.title }}</h4>
                <div class="avatar">
                  <img class="post_avatar" src="{% static 'assets/alchemyrefiner_alchemymagic_2_78ad3111-a1a3-4ce8-8f9b-ff5c9b293956_0.jpg' %}" alt="avatar" width="80" height="80">
                  <span class="fw-bold m-2">{{ post.user.first_name }} {{ post.user.last_name }}</span>
                </div>
                <p class="ezy__blog7-description mt-3 mb-4">
                  {{ post.content|truncatewords:20 }}
                </p>
                <a href="{% url 'postdetail' post.id %}"><button class="px-3"><span>Read More</span></button></a>
              </div>
            </article>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
</section>
{% endblock %}
